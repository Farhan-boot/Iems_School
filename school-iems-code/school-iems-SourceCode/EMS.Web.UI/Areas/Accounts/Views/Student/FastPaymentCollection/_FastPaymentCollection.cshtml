<!--File:User_Student List View-->
@using EMS.DataAccess.Data;
@using EMS.Framework.Permissions
@using EMS.Framework.Settings
@using EMS.Framework.Utils
@{

    // Angular Properties
    //var id = Request.QueryString["id"];//ViewContext.RouteData.Values["id"];
    //var StudentId = (string)id == null ? "0" : (string)id;
    // updateUrlQuery('uname', $scope.SearchUserName);

    var sid = Request.QueryString["sid"];//ViewContext.RouteData.Values["id"];
    var SearchUserName = (string)sid == null ? "" : (string)sid;


    //WebApi link for single row
    var getStudentByUserNameUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetStudentByUserName", area = "Accounts" });
    var saveStdCreditTransactionUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "SaveStdCreditTransaction", area = "Accounts" });
    var saveStdDebitTransactionUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "SaveStdDebitTransaction", area = "Accounts" });

    var getNewTransactionByStudentIdUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetNewTransactionByStudentId", area = "Accounts" });
    var getAllSemesterListUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetAllSemesterList", area = "Accounts" });
    var getDeleteUndeleteDebitTransactionByIdStdIdUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetDeleteUndeleteDebitTransactionByIdStdId", area = "Accounts" });
    var getDeleteUndeleteCreditTransactionByIdStdIdUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetDeleteUndeleteCreditTransactionByIdStdId", area = "Accounts" });
    var getBalanceRecalculateByStudentIdUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetBalanceRecalculateByStudentId", area = "Accounts" });
    
    var getRegenerateStudentBillByStdIdUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetRegenerateStudentBillByStdId", area = "Accounts" });
    var getFastPaymentCollectionDataExtraUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetFastPaymentCollectionDataExtra", area = "Accounts" });

    //WebApi link for List
    var getTransactionListByStudentIdUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdFirstPaymentCollectionApi", action = "GetTransactionListByStudentId2", area = "Accounts" });
    // var getPaymentCollectionByStudentIdSemesterIdUrl = Url.HttpRouteUrl("DefaultApi", new { controller = "StdPaymentCollectionApi", action = "GetPaymentCollectionByStudentIdSemesterId", area = "Accounts" });

    var viewPaymentDetailsByStudentIdSemesterIdUrl = Url.Action("ViewPaymentDetailsByStudentIdSemesterId", "Student", new { area = "Accounts" });
    var studentMoneyReceiptUrl = Url.Action("StudentMoneyReceipt", "Report", new { area = "Accounts" });

    //Angular Function Name

    //for list
    var getStudentByUserName = "getStudentByUserName";
    //var getPaymentCollectionByStudentIdSemesterId = "getPaymentCollectionByStudentIdSemesterId";
    string onChangeSemester = "onChangeSemester()";
    var refreshPage = "loadPage()";



    string getNewTransactionByStudentId = "getNewTransactionByStudentIdUrl";
    string saveStdDebitTransaction = "saveStdDebitTransaction";
    string onChangeIsCheckedAllSemester = "onChangeIsCheckedAllSemester";



    string SemesterList = "SemesterList";



    string PaymentCollectionList = "PaymentCollectionList";
    string CurrentPay = "CurrentPay";


    string StdTransactionDetailListJson = "StdTransactionDetailListJson";
    string StudentTransactionList = "StudentTransactionList";

}
<style>
    .std-info-table thead > tr > th {
        padding: 3px !important;
    }
</style>
<script>
    $(document).ready(function () {
        //console.log("ready!");
        collapseSidebar();
    });

</script>
<div ng-controller="FastPaymentCollection"
     class="std-payment-collection-form"
 
     ng-init="Init(
       '@SearchUserName'
       ,'@getStudentByUserNameUrl'
       ,'@getTransactionListByStudentIdUrl'
       ,'@viewPaymentDetailsByStudentIdSemesterIdUrl'
       ,'@saveStdCreditTransactionUrl'
       ,'@getNewTransactionByStudentIdUrl'
       ,'@getFastPaymentCollectionDataExtraUrl'
       ,'@saveStdDebitTransactionUrl'
       ,'@getAllSemesterListUrl'
       ,'@getDeleteUndeleteDebitTransactionByIdStdIdUrl'
        ,'@getDeleteUndeleteCreditTransactionByIdStdIdUrl'
        ,'@getBalanceRecalculateByStudentIdUrl'
        ,'@studentMoneyReceiptUrl'
        ,'@getRegenerateStudentBillByStdIdUrl'
     )">

    <div ng-Hide="!HasError " class="alert alert-danger fade in radius-bordered alert-shadowed">
        <button ng-click="HasError=false" class="close" data-dismiss1="alert">Ã—</button>
        <i class="fa-fw fa fa-warning"></i>
        <strong>Attention Please!</strong> {{ErrorMsg}}
    </div>
    <div ng-show="Student==null">
        @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_WelcomeMessages.cshtml")
    </div>

    <div ng-show="Student!=null" class="widget">
        <div class="widget-header bordered-bottom bordered-sky ">
            <i class="widget-icon fa fa-list bold  "></i>
            <div class="widget-buttons buttons-bordered no-padding-right" style="float: left">
                <span class="input-icon">
                    <input ng-blur="SearchUserName===''?SearchUserName=Student.@User_Account.Property_UserName:SearchUserName" ng-focus="temp=SearchUserName;Student.@User_Account.Property_UserName==SearchUserName?SearchUserName='':SearchUserName;" type="text" id="SearchByStdId" ng-model="SearchUserName" ng-Enter="@(getStudentByUserName)()" class="form-control input-xs " placeholder="Search by Student ID" style="">
                    <i class="glyphicon glyphicon-search blue"></i>
                </span>
            </div>
            <div class="widget-buttons buttons-bordered no-padding-right" style="float: left">
                <span>Semester Bill</span>
            </div>
            <div class="widget-buttons buttons-bordered no-padding-right" style="float: left">
                <select ng-model="SelectedSemesterId"
                        ng-change="@onChangeSemester"
                        ng-options="option.Id as option.Name for option in @SemesterList " class="form-control select-inline">
                    <option style="padding:10px" value="" label="" class="">---Select One---</option>
                </select>

            </div>
            <div class="widget-buttons no-padding-right" style="float: left;">
                <input ng-model="isCheckedAllSemester"
                       ng-change="@onChangeIsCheckedAllSemester ()"
                       type="checkbox" style="margin-top: 0px !important;vertical-align: middle;width: 13px;" />
                <span style="font-size: 9px;">Get All Semester</span>
            </div>
            <div class="widget-buttons no-padding-left">
                <button ng-click="addCollectionItemsModelOpen()"
                        class="btn btn-success btn-xs">
                    <i class="fa fa-plus"></i>
                    Add Special Credit
                </button>
                @*<a target="_blank" ng-click="newPayment()" class="btn btn-xs btn-success"><i class="fa fa-eraser"></i>New Payment</a>*@
            </div>
            @*<div class="widget-buttons buttons-bordered no-padding-right" style="float: left">
                      <a target="_blank" ng-href="@Url.Action("StudentAddEdit", "Student", new {area = "Academic"})/?id={{Student.Id}}#AccountManager">
                      </a>
                </div>*@

            <div class="widget-buttons">
                <div class="btn-group">
                    <a class="btn btn-blue btn-sm " href="#"><i class="fa fa-print"></i>Print Report</a>
                    <a class="btn btn-blue btn-sm dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false"><i class="fa fa-angle-down"></i></a>
                    <ul class="dropdown-menu dropdown-blue pull-left">
                        <li>
                            <a target="_blank" href="@Url.Action("PaymentLedger","Report",new {area = "Accounts"})?stdId={{StudentId}}">Payment Ledger</a>
                        </li>
                        <li>
                            <a target="_blank" href="@Url.Action("StudentSemesterBill", "Report", new {area = "Accounts"})?stdId={{StudentId}}">Semester Bill</a>
                        </li>
                        <li>
                            <a target="_blank" href="@Url.Action("StudentCollectionReport", "Report", new {area = "Accounts"})?stdId={{StudentId}}">Collection Report</a>
                        </li>

                        <li>
                            <a target="_blank" href="@Url.Action("CourseRegistrationBySemester", "TranscriptAndCertificate", new {area = "Academic"})?stdId={{StudentId}}">Semester Wise Registration</a>

                        </li>
                        <li>
                            <a target="_blank" href="@Url.Action("PrintCourseRegistration", "Student", new {area = "Academic"})?semesterId={{SelectedSemesterId}}&studentId={{StudentId}}">Registration Slip</a>

                        </li>

                        @*<li class="divider">{{SelectedSemesterName}}</li>*@

                    </ul>
                </div>
            </div>
            <div class="widget-buttons no-padding-left">
                @*<a target="_blank" href="@editStudentByIdPageUrl?id=0" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Add New</a>*@
                <button ng-click="@refreshPage" class="btn btn-info btn-xs"><i class="fa fa-refresh"></i> Refresh</button>
            </div>
            <div class="widget-buttons no-padding-left">
                @*<a target="_blank" href="@editStudentByIdPageUrl?id=0" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Add New</a>*@
                <button ng-click="getBalanceRecalculateByStudentId()" class="btn btn-warning btn-xs"><i class="fa fa-refresh"></i> Recalculate Balance</button>
            </div>
            <div class="widget-buttons no-padding-left">
                @*<a target="_blank" href="@editStudentByIdPageUrl?id=0" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Add New</a>*@
                <button ng-click="getRegenerateStudentBillByStdId()" class="btn btn-warning btn-xs"><i class="fa fa-refresh"></i> Regenerate Bill</button>
            </div>
            <div class="widget-buttons no-padding-left">
                @*<a target="_blank" href="@editStudentByIdPageUrl?id=0" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Add New</a>*@
                <button ng-click="" class="btn btn-default btn-xs" title="Help?"  data-toggle="modal" data-target="#showHelpModal"><i class="fa fa-question-circle"></i></button>

            </div>

        </div>
        <div class="show-assesment well with-header" style="padding-top: 0px !important;">
            <div class="row">
                <!--text type-->
                <div class="col-md-7 table-form">
                    @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_ProfileInfo.cshtml")
                    <div class="row">
                        <div class="col-md-12">
                            <div class="no-padding">
                                <div class="widget-main fast-payment-collection-tabs">
                                    <div class="tabbable">
                                        <ul class="nav nav-tabs" id="myTab9">
                                            <li class="active">
                                                <a data-toggle="tab" href="#debit-payable-items" aria-expanded="true">
                                                    <i class="fa fa-check" style="color: #65b951;"></i>
                                                    Debit ({{(@StudentTransactionList| filter:{IsDeleted:false, SemesterId :SelectedSemesterId, IsDebited: true}).length}})
                                                </a>
                                            </li>
                                            <li class="tab-red">
                                                <a data-toggle="tab" href="#credit-paid-items" aria-expanded="true">
                                                    <i class="fa fa-check" style="color: #65b951;"></i>
                                                    Credit ({{(@StudentTransactionList| filter:{IsDeleted:false, SemesterId :SelectedSemesterId, IsDebited: false}).length}})
                                                </a>
                                            </li>
                                            <li class="tab-red">
                                                <a data-toggle="tab" href="#trash" aria-expanded="true">
                                                    <i class="fa fa-trash" style="color: #d73d32;"></i>Trash ({{(@StudentTransactionList| filter:{IsDeleted: true}).length}})
                                                </a>
                                            </li>
                                            <li class="tab-red">
                                                <a data-toggle="tab" href="#PackageDiscount" aria-expanded="true">
                                                    Package & Discount
                                                </a>
                                            </li>
                                            <li class="tab-red">
                                                <a data-toggle="tab" href="#SemesterBills" aria-expanded="true">
                                                    Semester Bills
                                                </a>
                                            </li>
                                            <li class="tab-red">
                                                <a data-toggle="tab" href="#AllCollection" aria-expanded="true">
                                                    All Collection
                                                </a>
                                            </li>
                                        </ul>
                                        <div class="tab-content no-padding">
                                            <div id="debit-payable-items" class="tab-pane active">
                                                @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_DebitTransaction.cshtml")
                                            </div>
                                            <div id="credit-paid-items" class="tab-pane">
                                                @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_CreditTransaction.cshtml")
                                            </div>
                                            <div id="trash" class="tab-pane">
                                                @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_TrashTransaction.cshtml")
                                            </div>
                                            <div id="PackageDiscount" class="tab-pane">
                                                @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_PackageDiscount.cshtml")
                                            </div>
                                            <div id="SemesterBills" class="tab-pane">
                                                @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_SemesterBills.cshtml", true)
                                            </div>
                                            <div id="AllCollection" class="tab-pane">
                                                @*@Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_AllCollection.cshtml")*@
                                                @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_SemesterBills.cshtml", false)
                                            </div>
                                            <table style="width: 100%;">
                                                <tbody>
                                                <tr>
                                                    <td>
                                                        <table class="table table-hover table-striped table-bordered" style="color: #555555; margin-top: 20px; width: 375px; background-color: lightgray !important;">
                                                            <tbody>
                                                            <tr role="row" style="background-color: lightgray !important;">
                                                                <td class="text-center" style="width: 40px;">
                                                                    @*<input ng-model="@PreviousBalanceTransaction.@Acnt_StdTransaction.Property_IsSelected"
                                                                            ng-disabled="@NetBalanceTransaction.@Acnt_StdTransaction.Property_IsSelected ||PreviousBalance<=0"
                                                                            ng-change="@addRemoveTransactionInPaymentCollectionList (@PreviousBalanceTransaction)"
                                                                            type="checkbox" />*@
                                                                </td>
                                                                <td class="text-bold padding-11">
                                                                    Previous Balance
                                                                </td>
                                                                <td class="text-bold padding-11" style="width: 80px;">{{PreviousBalance |number: 2}}</td>
                                                            </tr>
                                                            <tr role="row" style="background-color: lightgray !important;">
                                                                <td class="text-center" style="width: 40px;"></td>
                                                                <td class="text-bold padding-11">
                                                                    This Semester Bill (+)
                                                                </td>
                                                                <td class="text-bold padding-11" style="width: 80px;">{{ThisSemesterPayable |number: 2}}</td>
                                                            </tr>
                                                            <tr role="row" style="background-color: lightgray !important;">
                                                                <td class="text-center" style="width: 40px;"></td>
                                                                <td class="text-bold padding-11">
                                                                    This Semester Paid (-)
                                                                </td>
                                                                <td class="text-bold padding-11" style="width: 80px;">{{ThisSemesterTotalPaid |number: 2}}</td>
                                                            </tr>
                                                            <tr role="row" style="background-color: lightgray !important;">
                                                                <td class="text-center">
                                                                    @*<input ng-model="@ThisSemesterBalanceTransaction.@Acnt_StdTransaction.Property_IsSelected"
                                                                            ng-disabled="@NetBalanceTransaction.@Acnt_StdTransaction.Property_IsSelected||CurrentBalance<=0"
                                                                            ng-change="@addRemoveTransactionInPaymentCollectionList (@ThisSemesterBalanceTransaction)"
                                                                            type="checkbox" />*@
                                                                </td>
                                                                <td class="text-bold padding-11">
                                                                    This Semester Balance
                                                                </td>
                                                                <td class="text-bold padding-11">{{CurrentBalance| number: 2}}</td>
                                                            </tr>
                                                            <tr role="row" style="background-color: lightgray !important;">
                                                                <td class="text-center">
                                                                    @*<input ng-model="@NetBalanceTransaction.@Acnt_StdTransaction.Property_IsSelected"
                                                                            ng-disabled="@PreviousBalanceTransaction.@Acnt_StdTransaction.Property_IsSelected||@ThisSemesterBalanceTransaction.@Acnt_StdTransaction.Property_IsSelected||Balance<=0"
                                                                            ng-change="@addRemoveTransactionInPaymentCollectionList (@NetBalanceTransaction)"
                                                                            type="checkbox" />*@
                                                                </td>
                                                                <td class="text-bold padding-11">
                                                                    @*Net Due/Balance Over Bill*@
                                                                    Net Due/Balance on Overall Bill
                                                                </td>
                                                                <td class="text-bold padding-11">{{Balance| number: 2}}</td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                    <td>
                                                        <table class="table table-hover table-striped table-bordered" style="color: #555555; margin-top: 63px; background-color: lightgray !important; float: right;">
                                                            <tbody>
                                                            @if (SiteSettings.Instance.StudentPaymentCollectionPanel.IsShowAdmissionFeeDue)
                                                            {
                                                                <tr role="row" style="background-color: lightgray !important;">
                                                                    <td class="text-bold padding-11">
                                                                        Admission Fee Due
                                                                    </td>
                                                                    <td class="text-bold padding-11" style="width: 80px;">
                                                                        <kbd ng-class="AdmissionFeeDue>0? 'bg-danger':'bg-success'">{{AdmissionFeeDue |number: 2}}</kbd>
                                                                    </td>
                                                                </tr>
                                                            } 
                                                            @if (SiteSettings.Instance.StudentPaymentCollectionPanel.IsShowMidtermBill)
                                                            {
                                                                <tr role="row" style="background-color: lightgray !important;">
                                                                    <td class="text-bold padding-11">
                                                                        Midterm Bill
                                                                    </td>
                                                                    <td class="text-bold padding-11" style="width: 80px;">{{MidtermBill |number: 2}}</td>
                                                                </tr>
                                                            }
                                                            @if (SiteSettings.Instance.StudentPaymentCollectionPanel.IsShowMidTermDue)
                                                            {
                                                                <tr role="row" style="background-color: lightgray !important;">
                                                                    <td class="text-bold padding-11">
                                                                        Midterm Due
                                                                    </td>
                                                                    <td class="text-bold padding-11" style="width: 80px;">
                                                                        <kbd ng-class="MidtermDue>0? 'bg-danger':'bg-success'">{{MidtermDue |number: 2}}</kbd>
                                                                    </td>
                                                                </tr>
                                                            }
                                                            @*<tr role="row" style="background-color: lightgray !important;">
                                                                        <td class="text-bold padding-11">
                                                                            Final Term Bill
                                                                        </td>
                                                                        <td class="text-bold padding-11">{{FinalTermBill| number: 2}}</td>
                                                                    </tr>*@
                                                            @*<tr role="row" style="background-color: lightgray !important;">
                                                                        <td class="text-bold padding-11 ">
                                                                            Final Term Due
                                                                        </td>
                                                                        <td class="text-bold padding-11">
                                                                            <kbd ng-class="FinalTermDue>0? 'bg-danger':'bg-success'">{{FinalTermDue| number: 2}}</kbd>
                                                                        </td>
                                                                    </tr>*@
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            @*<table class="form" style="width: 100%;" >
                                                <tbody>
                                                <tr>
                                                    <td class="fieldlabel " style="width: 110px; padding-left: 5px !important;">Accounts Remark:</td>
                                                    <td class="fieldarea">
                                                        <input ng-model="Student.@User_Account.Property_Remarks"
                                                               ng-disabled="true"
                                                               type="text" class="form-control " placeholder="Enter Accounts Remark" maxlength="256" required="">
                                                    </td>
                                                    <td style="width: 70px; text-align: center;">
                                                        <button class="btn-default  btn-xs">Edit</button>
                                                        <button class="btn-default btn-xs">Update</button>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>*@
                                        </div>
                                    </div>
                                    
                                </div><!--Widget Body end-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 table-form">
                    @Html.Partial("~/Areas/Accounts/Views/Student/FastPaymentCollection/_Collection.cshtml")
                </div>
            </div>
        </div>

    </div>
    <!-- Add Credit Item Modal Start   addPaymentModal-->
    <div class="modal fade" id="addCreditItemModal" tabindex="-1" role="dialog" aria-labelledby="addCreditItemModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Add New Credit Item in Collection Pane</h4>
                </div>
                <div class="modal-body">
                    <div class="show-assesment well with-header" style="padding-top: 0px !important;">
                        <div class="row">
                            <div class="col-md-12 table-form">
                                <!-- <input type="hidden" name="token" value=""> -->
                                <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                    <tbody>
                                        <tr>
                                            <td class="fieldlabel">Particular<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <select ng-model="CollectionItem.@Acnt_StdTransactionDetail.Property_ParticularId"
                                                        ng-options="option.Id as option.Name for option in ParticularNameList | filter: {@Acnt_ParticularName.Property_ManualEntryAllowTypeEnumId: @((int)Acnt_ParticularName.ManualEntryAllowTypeEnum.AllowCredit)} " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Particular" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                    <tr>
                                        <td class="fieldlabel">Amount:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                        <td class="fieldarea">
                                            <input ng-model="CollectionItem.@Acnt_StdTransactionDetail.Property_Amount" type="text"
                                                   class="form-control  input-inline" placeholder="Enter Amount">
                                        </td>
                                        <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                    </tr> 
                                        <tr>
                                        <td class="fieldlabel">Remark:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="CollectionItem.@Acnt_StdTransactionDetail.Property_Remark" type="text"
                                                       class="form-control  input-inline"   placeholder="remark optional">

                                        
                                            
                                        </td>
                                        <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                    </tr>
                                        <tr>
                                            <td colspan="3" class="fieldlabel">
                                                @*<div ng-show="CollectionTransaction.StdTransactionDetailListJson.length==0" class="alert alert-warning fade in radius-bordered alert-shadowed">
                                                    <button ng-click="HasError=false" class="close" data-dismiss1="alert">Ã—</button>
                                                    <i class="fa-fw fa fa-warning"></i>
                                                    <strong>Attention!</strong> Add only .
                                                </div>*@

                                            </td>
                                            
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <button ng-click="addCollectionItems()" type="button" class="btn btn-success">
                        <span class="fa fa-save"></span> Add
                    </button>
                    <button type="button" class="btn btn-warning" data-dismiss="modal"><i class="fa fa-close"></i>Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Add Credit Item Modal End -->
    <!-- Edit Debit Modal Start -->
    <div class="modal fade" id="editDebitTransactionModal" tabindex="-1" role="dialog" aria-labelledby="editDebitTransactionModal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Debit: Edit {{StudentTransaction.@Acnt_StdTransaction.Property_Name}}</h4>
                </div>
                <div class="modal-body">
                    <div class="show-assesment well with-header" style="padding-top: 0px !important;">
                        <div class="row">
                            <div class="col-md-6 table-form">
                                <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                    <tbody>
                                        <tr ng-if="StudentTransaction.@Acnt_StdTransaction.Property_Id==0">
                                            <td class="fieldlabel">Particular<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <select ng-model="StudentTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId"
                                                        ng-change="onChangeParticular(StudentTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId)"
                                                        ng-options="option.Id as option.Name for option in ParticularNameList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Give Particular" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr ng-if="StudentTransaction.@Acnt_StdTransaction.Property_Id!=0">
                                            <td class="fieldlabel">Name<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_Name" type="text"
                                                       class="form-control  input-inline" placeholder="Enter Amount">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Bank Name:</td>
                                            <td class="fieldarea">
                                                <select ng-model="StudentTransaction.@Acnt_StdTransaction.Property_BankId"
                                                        ng-change="onChangeBank(StudentTransaction.@Acnt_StdTransaction.Property_BankId,StudentTransaction)"
                                                        ng-options="option.Id as option.Name for option in OfficialBankList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Date of Action:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_Date" type="datetime"
                                                       class="form-control  input-inline datepicker" placeholder="14/09/2018">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Give Particular" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Payment Method:</td>
                                            <td class="fieldarea">
                                                <select ng-model="StudentTransaction.@Acnt_StdTransaction.Property_TransactionTypeEnumId"
                                                        ng-options="option.Id as option.Name for option in TransactionTypeEnumList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                    <tr>
                                        <td class="fieldlabel">Amount:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                        <td class="fieldarea">
                                            {{StudentTransaction.StdTransactionDetailListJson| total:'@Acnt_StdTransactionDetail.Property_Amount'|number:2}}

                                            @*<input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_DebitAmount" type="text"
                                                       ng-disabled="true"
                                                       class="form-control  input-inline" placeholder="Enter Amount">*@
                                        </td>
                                        <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fieldlabel">Remark:</td>
                                        <td class="fieldarea">
                                            <input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_Remark" type="text"
                                                   class="form-control  input-inline" placeholder="Enter Remark">
                                        </td>
                                        <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Remark" data-toggle="tooltip"></i></span></td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-6 table-form">
                                <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                    <tbody>

                                        <tr>
                                            <td class="fieldlabel">Date Created:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{StudentTransaction.@Acnt_StdTransaction.Property_CreateDate|date:'d/M/yy h:mm a'}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="" data-toggle="tooltip"></i></span></td>
                                    </tr> 
                                        <tr>
                                            <td class="fieldlabel">Created By:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{StudentTransaction.@Acnt_StdTransaction.Property_CreateByName}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle"  data-toggle="tooltip"></i></span></td>
                                    </tr> 
                                        <tr>
                                            <td class="fieldlabel">Date Updated:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{StudentTransaction.@Acnt_StdTransaction.Property_LastChanged|date:'d/M/yy h:mm a'}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="" data-toggle="tooltip"></i></span></td>
                                        </tr>    <tr>
                                            <td class="fieldlabel">Updated By:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{StudentTransaction.@Acnt_StdTransaction.Property_LastChangedByName}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Slip ID:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{StudentTransaction.@Acnt_StdTransaction.Property_Id}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Semester:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                <select ng-model="StudentTransaction.@Acnt_StdTransaction.Property_SemesterId"
                                                        @*ng-disabled="true"*@
                                                        ng-options="option.Id as option.Name for option in @SemesterList " class="form-control select-inline">
                                                    <option style="padding:10px" value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Transaction Type:</td>
                                            <td ng-if="StudentTransaction.@Acnt_StdTransaction.Property_IsDebited"
                                                class="fieldarea" style="padding-left: 5px !important;">
                                                Debit
                                            </td>
                                            <td ng-if="!StudentTransaction.@Acnt_StdTransaction.Property_IsDebited"
                                                class="fieldarea" style="padding-left: 5px !important;">
                                                Credit
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Status:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                <select ng-model="StudentTransaction.@Acnt_StdTransaction.Property_PaymentStatusEnumId"
                                                        ng-options="option.Id as option.Name for option in PaymentStatusEnumList" class="form-control select-inline">
                                                    <option style="padding:10px" value="" label="" class="">---Select Status---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-12 table-form">
                                <table class="table table-striped table-bordered ">
                                    <thead>
                                        <tr>
                                            <th colspan="6" style="text-align: center;">
                                                Transaction Items
                                            </th>
                                        </tr>
                                        <tr>
                                            <th class="text-center" style="width: 40px;">SN</th>
                                            <th class="text-center" style="width: 150px;">Particular</th>
                                            <th class="text-center" style="width: 100px;">Amount</th>
                                            <th class="text-center" style="width: 150px;">Is Package Payment</th>
                                            <th class="text-center" style="width: 150px;">Remark</th>
                                            <th class="text-center">History</th>
                                            @*<th class="text-center" style="width: 150px;">Is Deleted</th>*@
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="row in StudentTransaction.@StdTransactionDetailListJson">
                                            <td style="text-align: center;">{{$index+1}}</td>
                                            <td style="text-align: center;">
                                                {{row.@Acnt_StdTransactionDetail.Property_Name}}
                                            </td>
                                            <td style="text-align: center;">
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_Amount"
                                                       ng-change="onChangeTransDtlAmount(StudentTransaction.@StdTransactionDetailListJson)"
                                                       style="width: 100px; padding-left: 3px;" type="text">
                                            </td>
                                            <td style="text-align: center;">
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_IsPackagePayment" type="checkbox" />
                                            </td>
                                            @*<td style="text-align: center;">
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_IsDeleted" type="checkbox" />
                                            </td>*@

                                            <td style="font-size: 9px; text-align: center;" >
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_Remark" style="padding-left: 3px;" type="text">
                                            </td>
                                            <td style="font-size: 9px; text-align: center;" ng-bind-html="renderHtml(row.@Acnt_StdTransactionDetail.Property_History)">

                                            </td>
                                        </tr>
                                    </tbody>
                                    <thead>
                                        <tr>
                                            <th class="text-center "></th>
                                            <th class="text-bold" colspan="1">
                                                Total
                                            </th>
                                            <th class="text-bold">
                                                {{StudentTransaction.StdTransactionDetailListJson| total:'@Acnt_StdTransactionDetail.Property_Amount'|number:2}}
                                            </th>
                                            <th class="text-bold ng-binding"></th> 
                                            <th class="text-bold ng-binding"></th>
                                            <th class="text-bold ng-binding"></th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 15px; ">
                        <button ng-click="saveStdDebitTransaction (false)" type="button" class="btn btn-success"><span class="fa fa-save"></span> Save</button>
                        <button type="button" class="btn btn-warning" data-dismiss="modal"><i class="fa fa-close"></i>Close</button>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: left">
                    <div class="header bg-blue" style="padding: 0 10px;">
                        History
                    </div>
                    <div ng-bind-html="renderHtml(StudentTransaction.@Acnt_StdTransaction.Property_History)"></div>
                </div>

            </div>
        </div>
    </div>
<!--Edit Debit Modal End -->
    @if (HttpUtil.IsSupperAdmin())
    {
        <!-- test Edit Credit Modal Start -->
        <div class="modal fade" id="testEditCreditTransactionModal" tabindex="-1" role="dialog" aria-labelledby="editCreditTransactionModal">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"> Test Edit {{CollectionTransaction.@Acnt_StdTransaction.Property_Name}}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="show-assesment well with-header" style="padding-top: 0px !important;">
                            <div class="row">
                                <div class="col-md-6 table-form">
                                    <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                        <tbody>
                                            <tr ng-if="CollectionTransaction.@Acnt_StdTransaction.Property_Id==0">
                                                <td class="fieldlabel">Particular<span class="red glyphicon glyphicon-asterisk"></span></td>
                                                <td class="fieldarea">
                                                    <select ng-model="CollectionTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId"
                                                            ng-change="onChangeParticular(CollectionTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId)"
                                                            ng-options="option.Id as option.Name for option in ParticularNameList " class="form-control select-inline">
                                                        <option value="" label="" class="">---Select One---</option>
                                                    </select>
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Give Particular" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                            <tr ng-if="CollectionTransaction.@Acnt_StdTransaction.Property_Id!=0">
                                                <td class="fieldlabel">Name<span class="red glyphicon glyphicon-asterisk"></span></td>
                                                <td class="fieldarea">
                                                    <input ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_Name" type="text"
                                                           class="form-control  input-inline" placeholder="Enter Amount">
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                            <tr>
                                                <td class="fieldlabel">Bank Name:</td>
                                                <td class="fieldarea">
                                                    <select ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_BankId"
                                                            ng-change="onChangeBank(CollectionTransaction.@Acnt_StdTransaction.Property_BankId,StudentTransaction)"
                                                            ng-options="option.Id as option.Name for option in OfficialBankList " class="form-control select-inline">
                                                        <option value="" label="" class="">---Select One---</option>
                                                    </select>
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                            <tr>
                                                <td class="fieldlabel">Date of Action:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                                <td class="fieldarea">
                                                    <input ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_Date" type="datetime"
                                                           class="form-control  input-inline datepicker" placeholder="14/09/2018">
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Give Particular" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                            <tr>
                                                <td class="fieldlabel">Payment Method:</td>
                                                <td class="fieldarea">
                                                    <select ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_TransactionTypeEnumId"
                                                            ng-options="option.Id as option.Name for option in TransactionTypeEnumList " class="form-control select-inline">
                                                        <option value="" label="" class="">---Select One---</option>
                                                    </select>
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                            <tr>
                                                <td class="fieldlabel">Amount<span class="red glyphicon glyphicon-asterisk"></span></td>
                                                <td class="fieldarea">
                                                    {{CollectionTransaction.StdTransactionDetailListJson| total:'@Acnt_StdTransactionDetail.Property_Amount'|number:2}}
                                                    @*<input ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_CreditAmount" type="text"
                                                        ng-disabled="true"
                                                        class="form-control  input-inline" placeholder="Enter Amount">*@
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-6 table-form">
                                    <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                        <tbody>
                                            <tr>
                                                <td class="fieldlabel">Date Created:</td>
                                                <td class="fieldarea" style="padding-left: 5px !important;">
                                                    {{CollectionTransaction.@Acnt_StdTransaction.Property_CreateDate|date:'d/M/yy h:mm a'}}
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                            <tr>
                                                <td class="fieldlabel">Slip ID:</td>
                                                <td class="fieldarea" style="padding-left: 5px !important;">
                                                    {{CollectionTransaction.@Acnt_StdTransaction.Property_Id}}
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                            <tr>
                                                <td class="fieldlabel">Semester:</td>
                                                <td class="fieldarea" style="padding-left: 5px !important;">
                                                    <select ng-model="StudentTransaction.@Acnt_StdTransaction.Property_SemesterId"
                                                            @*ng-disabled="true"*@
                                                            ng-options="option.Id as option.Name for option in @SemesterList " class="form-control select-inline">
                                                        <option style="padding:10px" value="" label="" class="">---Select One---</option>
                                                    </select>
                                                </td>
                                                <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-12 table-form">
                                    <div class="tabbable">
                                        <ul class="nav nav-tabs" id="edit-credit-items-tab">
                                            <li class="active">
                                                <a data-toggle="tab" href="#edit-credit-items" aria-expanded="true">
                                                    <i class="fa fa-check" style="color: #65b951;"></i>
                                                    Active
                                                    ({{(@StudentTransactionList| filter:{IsDeleted:false, SemesterId :SelectedSemesterId, IsDebited: true}).length}})
                                                </a>
                                            </li>
                                            <li class="tab-red">
                                                <a data-toggle="tab" href="#edit-credit-items-trash" aria-expanded="true">
                                                    <i class="fa fa-trash" style="color: #d73d32;"></i>Trash
                                                    ({{(@StudentTransactionList| filter:{IsDeleted: true}).length}})
                                                </a>
                                            </li>
                                        </ul>
                                        <div class="tab-content no-padding">
                                            <div id="edit-credit-items" class="tab-pane active">
                                                <table class="table table-striped table-bordered ">
                                                    <thead>
                                                        <tr>
                                                            <th colspan="4" style="text-align: center;">
                                                                Transaction Items
                                                            </th>
                                                        </tr>
                                                        <tr>
                                                            <th class="text-center" style="width: 40px;">SN</th>
                                                            <th class="text-center">Particular</th>
                                                            <th class="text-center" style="width: 100px;">Amount</th>
                                                            <th class="text-center" style="width: 150px;">Is Packge Payment</th>
                                                            @*<th class="text-center" style="width: 150px;">Is Deleted</th>*@
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="row in CollectionTransaction.@StdTransactionDetailListJson">
                                                            <td style="text-align: center;">{{$index+1}}</td>
                                                            <td style="text-align: center;">
                                                                {{row.@Acnt_StdTransactionDetail.Property_Name}}
                                                            </td>
                                                            <td style="text-align: center;">
                                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_Amount"
                                                                       ng-change="onChangeTransDtlAmount(CollectionTransaction.@StdTransactionDetailListJson)"
                                                                       style="width: 100px; padding-left: 3px;" type="text">
                                                            </td>
                                                            <td style="text-align: center;">
                                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_IsPackagePayment" type="checkbox" />
                                                            </td>
                                                            @*<td style="text-align: center;">
                        <input ng-model="row.@Acnt_StdTransactionDetail.Property_IsDeleted" type="checkbox" />
                    </td>*@
                                                        </tr>
                                                    </tbody>
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center "></th>
                                                            <th class="text-bold" colspan="1">
                                                                Total
                                                            </th>
                                                            <th class="text-bold">
                                                                {{CollectionTransaction.StdTransactionDetailListJson| total:'@Acnt_StdTransactionDetail.Property_Amount'|number:2}}
                                                            </th>
                                                            <th class="text-bold ng-binding"></th>
                                                            @*<th></th>*@
                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>
                                            <div id="edit-credit-items-trash" class="tab-pane">
                                               
                                            </div>
                                        </div>
                                    </div>

                                    
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 15px; ">
                            <button ng-click="editStdCreditTransaction ()" type="button" class="btn btn-success"><span class="fa fa-save"></span> Save</button>
                            <button type="button" class="btn btn-warning" data-dismiss="modal"><i class="fa fa-close"></i>Close</button>
                        </div>
                    </div>
                    <div class="modal-footer" style="text-align: left">
                        <div class="header bg-blue" style="padding: 0 10px;">
                            History
                        </div>
                        {{CollectionTransaction.@Acnt_StdTransaction.Property_History}}
                    </div>
                </div>
            </div>
        </div>
    <!--test Edit Credit Modal End -->
    }


    <!-- Edit Credit Modal Start -->
    <div class="modal fade" id="editCreditTransactionModal" tabindex="-1" role="dialog" aria-labelledby="editCreditTransactionModal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Edit {{CollectionTransaction.@Acnt_StdTransaction.Property_Name}}</h4>
                </div>
                <div class="modal-body">
                    <div class="show-assesment well with-header" style="padding-top: 0px !important;">
                        <div class="row">
                            <div class="col-md-6 table-form">
                                <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                    <tbody>
                                        <tr ng-if="CollectionTransaction.@Acnt_StdTransaction.Property_Id==0">
                                            <td class="fieldlabel">Particular<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <select ng-model="CollectionTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId"
                                                        ng-change="onChangeParticular(CollectionTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId)"
                                                        ng-options="option.Id as option.Name for option in ParticularNameList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Give Particular" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr ng-if="CollectionTransaction.@Acnt_StdTransaction.Property_Id!=0">
                                            <td class="fieldlabel">Name<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_Name" type="text"
                                                       class="form-control  input-inline" placeholder="Enter Amount">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Bank Name:</td>
                                            <td class="fieldarea">
                                                <select ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_BankId"
                                                        ng-change="onChangeBank(CollectionTransaction.@Acnt_StdTransaction.Property_BankId, CollectionTransaction)"
                                                        ng-options="option.Id as option.Name for option in OfficialBankList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Date of Action:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_Date" type="datetime"
                                                       class="form-control  input-inline datepicker" placeholder="14/09/2018">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Give Particular" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Payment Method:</td>
                                            <td class="fieldarea">
                                                <select ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_TransactionTypeEnumId"
                                                        ng-options="option.Id as option.Name for option in TransactionTypeEnumList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                    <tr>
                                        <td class="fieldlabel">Amount<span class="red glyphicon glyphicon-asterisk"></span></td>
                                        <td class="fieldarea">
                                            {{CollectionTransaction.StdTransactionDetailListJson| total:'@Acnt_StdTransactionDetail.Property_Amount'|number:2}}
                                            @*<input ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_CreditAmount" type="text"
                                                       ng-disabled="true"
                                                       class="form-control  input-inline" placeholder="Enter Amount">*@
                                        </td>
                                        <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                    </tr>

                                        <tr>
                                            <td class="fieldlabel">Voucher No<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                               
                                                <input ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_VoucherNo" type="text"
                                                       class="form-control  input-inline" placeholder="Enter Voucher">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Voucher" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-6 table-form">
                                <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                    <tbody>
                                    <tr>
                                        <td class="fieldlabel">Date Created:</td>
                                        <td class="fieldarea" style="padding-left: 5px !important;">
                                            {{CollectionTransaction.@Acnt_StdTransaction.Property_CreateDate|date:'d/M/yy h:mm a'}}
                                        </td>
                                        <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                    </tr>
                                        <tr>
                                            <td class="fieldlabel">Created By:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{CollectionTransaction.@Acnt_StdTransaction.Property_CreateByName}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Date Updated:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{CollectionTransaction.@Acnt_StdTransaction.Property_LastChanged|date:'d/M/yy h:mm a'}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Updated By:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{CollectionTransaction.@Acnt_StdTransaction.Property_LastChangedByName}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Slip ID:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                {{CollectionTransaction.@Acnt_StdTransaction.Property_Id}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Semester:</td>
                                            <td class="fieldarea" style="padding-left: 5px !important;">
                                                <select ng-model="CollectionTransaction.@Acnt_StdTransaction.Property_SemesterId"
                                                        @*ng-disabled="true"*@
                                                        ng-options="option.Id as option.Name for option in @SemesterList " class="form-control select-inline">
                                                    <option style="padding:10px" value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Transaction Type" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-12 table-form">
                                <table class="table table-striped table-bordered ">
                                    <thead>
                                        <tr>
                                            <th colspan="6" style="text-align: center;">
                                                Transaction Items
                                            </th>
                                        </tr>
                                        <tr>
                                            <th class="text-center" style="width: 40px;">SN</th>
                                            <th class="text-center">Particular</th>
                                            <th class="text-center" style="width: 100px;">Amount</th>
                                            <th class="text-center" style="width: 150px;">Is Packge Payment</th>
                                            <th class="text-center" style="width: 150px;">Remark</th>
                                            <th class="text-center">History</th>
                                            @*<th class="text-center" style="width: 150px;">Is Deleted</th>*@
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="row in CollectionTransaction.@StdTransactionDetailListJson">
                                            <td style="text-align: center;">{{$index+1}}</td>
                                            <td style="text-align: center;">
                                                {{row.@Acnt_StdTransactionDetail.Property_Name}}
                                            </td>
                                            <td style="text-align: center;">
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_Amount"
                                                       ng-change="onChangeTransDtlAmount(CollectionTransaction.@StdTransactionDetailListJson)"
                                                       style="width: 100px; padding-left: 3px;" type="text">
                                            </td>
                                            <td style="text-align: center;">
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_IsPackagePayment" type="checkbox"/>
                                            </td>
                                            <td style="font-size: 9px; text-align: center;">
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_Remark" style="padding-left: 3px;" type="text">

                                            </td>
                                            <td style="font-size: 9px; text-align: center;" ng-bind-html="renderHtml(row.@Acnt_StdTransactionDetail.Property_History)"></td>
                                            @*<td style="text-align: center;">
                                                <input ng-model="row.@Acnt_StdTransactionDetail.Property_IsDeleted" type="checkbox" />
                                            </td>*@
                                        </tr>
                                    </tbody>
                                    <thead>
                                        <tr>
                                            <th class="text-center "></th>
                                            <th class="text-bold" colspan="1">
                                                Total
                                            </th>
                                            <th class="text-bold">
                                                {{CollectionTransaction.StdTransactionDetailListJson| total:'@Acnt_StdTransactionDetail.Property_Amount'|number:2}}
                                            </th>
                                            <th class="text-bold ng-binding"></th>
                                            <th class="text-bold ng-binding"></th>
                                            <th class="text-bold ng-binding"></th>
                                            @*<th></th>*@
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 15px; ">
                        <button ng-click="editStdCreditTransaction ()" type="button" class="btn btn-success"><span class="fa fa-save"></span> Save</button>
                        <button type="button" class="btn btn-warning" data-dismiss="modal"><i class="fa fa-close"></i>Close</button>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: left">
                    <div class="header bg-blue" style="padding: 0 10px;">
                        History
                    </div>
                    {{CollectionTransaction.@Acnt_StdTransaction.Property_History}}
                </div>
            </div>
        </div>
    </div>
    <!--Edit Credit Modal End -->
    <!-- Add Debit Modal Start -->
    <div class="modal fade" id="addDebitTransactionModal" tabindex="-1" role="dialog" aria-labelledby="addDebitTransactionModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">New Debit Entry Of {{SelectedSemesterName}} </h4>
                </div>
                <div class="modal-body">
                    <div class="show-assesment well with-header" style="padding-top: 0px !important;">
                        <div class="row">
                            <div class="col-md-12 table-form">
                                <table class="form" width="100%" border="0" cellspacing="2" cellpadding="3">
                                    <tbody>
                                        <tr @*ng-if="StudentTransaction.@Acnt_StdTransaction.Property_Id==0" *@>
                                            <td class="fieldlabel">Particular<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <select tabindex="0" id="newDrEntryParticularName" ng-model="StudentTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId"
                                                        ng-change="onChangeParticular(StudentTransaction.@StdTransactionDetailListJson.@Acnt_StdTransactionDetail.Property_ParticularId)"
                                                        ng-options="option.Id as option.Name for option in ParticularNameList" class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Particular" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Amount:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_DebitAmount" type="text"
                                                       class="form-control  input-inline" placeholder="Enter Amount">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Amount" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Bank Name:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <select ng-model="StudentTransaction.@Acnt_StdTransaction.Property_BankId"
                                                        ng-change="onChangeBank(StudentTransaction.@Acnt_StdTransaction.Property_BankId,StudentTransaction)"
                                                        ng-options="option.Id as option.Name for option in OfficialBankList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Bank Name" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Date of Action:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_Date" type="datetime"
                                                       class="form-control  input-inline datepicker" placeholder="14/09/2018">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Give Date of Action" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Payment Method:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <select ng-model="StudentTransaction.@Acnt_StdTransaction.Property_TransactionTypeEnumId"
                                                        ng-options="option.Id as option.Name for option in TransactionTypeEnumList " class="form-control select-inline">
                                                    <option value="" label="" class="">---Select One---</option>
                                                </select>
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Select Payment Method" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                        <tr>
                                            <td class="fieldlabel">Is Package Payment:<span class="red glyphicon glyphicon-asterisk"></span></td>
                                            <td class="fieldarea">
                                                <input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_IsPackagePayment" type="checkbox" />
                                                {{StudentTransaction.@Acnt_StdTransaction.Property_IsPackagePayment}}
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Is Package Payment" data-toggle="tooltip"></i></span></td>
                                        </tr>

                                        <tr>
                                            <td class="fieldlabel">Remark:</td>
                                            <td class="fieldarea">
                                                <input ng-model="StudentTransaction.@Acnt_StdTransaction.Property_Remark" type="text"
                                                       class="form-control  input-inline" placeholder="Enter Remark">
                                            </td>
                                            <td class="fieldarea-tooltip"><span><i class="fa fa-question-circle" data-title="Enter Remark" data-toggle="tooltip"></i></span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <button ng-click="@saveStdDebitTransaction (true)" type="button" class="btn btn-success">
                        <span class="fa fa-save"></span> Save
                    </button>
                    <button type="button" class="btn btn-warning" data-dismiss="modal"><i class="fa fa-close"></i>Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Add Debit Modal End -->
    <!--Assesment Modal Start -->
    <div class="modal fade" id="showAssesmentModal" tabindex="-1" role="dialog" aria-labelledby="showAssesmentModal">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header bg-info">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" style="color: white;" id="showAssesmentModalLabel">Semester Payments</h4>
                </div>
                <div class="modal-body">
                    @*<div class="show-assesment well with-header">*@
                    @*<div class="header bg-blue">
                            Semester Payments
                        </div>*@
                    <div class="payment-details"></div>
                    @*</div>*@
                    <div class="modal-footer" style="text-align: center">
                        @*<button type="button" class="btn btn-success" data-dismiss="modal"><i class="fa fa-paypal"></i> Online Payment</button>*@
                        <a class="btn btn-blue"
                           @*target="_blank" href="@(printPaySlipByTransIdPageUrl)/?transactionId={{StdTransactionId}}"*@
                           @*data-dismiss="modal"*@><i class="fa fa-print"></i>Print Payslip</a>
                        <button type="button" class="btn btn-warning" data-dismiss="modal"><i class="fa fa-close"></i>Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal End -->
    </div>
    <!--Assesment Modal End -->

    <!--Help Modal Start -->
<div class="modal fade" id="showHelpModal" tabindex="-1" role="dialog" aria-labelledby="showHelpModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-info">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" style="color: white;" id="showHelpModalLabel">Payment Collection Help</h4>
                </div>
                <div class="modal-body">
                    <table class="table table-hover table-striped table-bordered " style="color: #555555;">
                        <thead>
                            <tr role="row">
                                <td style="width: 133px;" class="text-bold">Short Key</td>
                                <td class="text-bold">
                                    Task Name

                                </td>
                               
                            </tr>
                        </thead>
                        <tbody>
                        <tr role="row">
                            <td>Ctrl+Alt+0</td>
                            <td>
                                Goto Search New Student Box.
                            </td>
                        </tr>
                            <tr role="row">
                                <td>Ctrl+Alt+2</td>
                                <td>
                                    Add Semester Payment as Credit.
                                </td>

                            </tr>
                        <tr role="row">
                            <td  > Ctrl+Alt+3</td>
                            <td>
                                Show "Add New Debit" Popup Form.

                            </td>

                        </tr>
                        <tr role="row">
                            <td>Ctrl+Enter</td>
                            <td>
                                Save & Close "Add New Debit" Popup Form.
                            </td>

                        </tr>
                        <tr role="row">
                            <td>Ctrl+Alt+Enter</td>
                            <td>
                                Save & Print Selected Collection.
                            </td>

                        </tr>
                            <tr role="row">
                                <td>Esc</td>
                                <td>
                                    Close Any Popup Form.
                                </td>

                        </tr>
                        <tr role="row">
                            <td>Shit+D</td>
                            <td>
                                Show "Debit" Tab.
                            </td>

                        </tr>
                            <tr role="row">
                                <td>Shit+C</td>
                                <td>
                                    Show "Credit" Tab.
                                </td>

                        </tr> 
                            <tr role="row">
                                <td>Shit+T</td>
                                <td>
                                    Show "Trash" Tab.
                                </td>

                            </tr>  <tr role="row">
                                <td>Shit+P</td>
                                <td>
                                    Show "Package & Discount" Tab.
                                </td>

                            </tr> <tr role="row">
                                <td>Shit+S</td>
                                <td>
                                    Show "Semester Bills" Tab.
                                </td>

                            </tr><tr role="row">
                                <td>Shit+A</td>
                                <td>
                                    Show "All Collection" Tab.
                                </td>

                            </tr>

                        </tbody>
                    </table>
                    <div class="payment-details"></div>
               
                    <div class="modal-footer" style="text-align: center">
        
                   
                        <button type="button" class="btn btn-warning" data-dismiss="modal"><i class="fa fa-close"></i>Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Help End -->
    </div>
    <!--Assesment Modal End -->



</div>
<style>
    .std-payment-collection-form .form-title {
        padding: 3px 0;
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .std-payment-collection-form input,
    .std-payment-collection-form optgroup,
    .std-payment-collection-form select,
    .std-payment-collection-form textarea {
        height: 25px !important;
        font-size: 12px;
    }

    .std-payment-collection-form td.fieldlabel {
        font-size: 12px;
        font-weight: 500;
        text-align: left !important;
    }

    .std-payment-collection-form td.fieldarea {
        text-align: left !important;
    }

    .std-payment-collection-form .glyphicon {
        font-size: 7px !important;
    }

    .std-payment-collection-form .checkbox-inline {
        font-size: 10px;
    }

        .std-payment-collection-form .checkbox-inline input {
            height: 15px !important;
        }

    .std-payment-collection-form .table-form td {
        padding: 3px 3px;
    }

    .std-payment-collection-form .form-title {
        font-weight: 600 !important;
        font-size: 15px;
    }

    .fieldarea .checkbox {
        margin-top: 3px !important;
        margin-bottom: -4px !important;
    }

    .std-info-table tr th {
        text-align: left !important;
    }

    .padding-11 {
        padding: 11px !important;
    }

    .fast-payment-collection tr td:first-child {
        text-align: center !important;
    }

    .fast-payment-collection tr td:last-child {
        padding-right: 8px !important;
    }

    .fast-payment-collection-tabs .nav > li > a {
        padding: 5px 5px;
    }
    .balance-calculation-td {
        width: auto !important;
    }

    .trem-due table > tbody > tr > td:first-child {
        padding-left: 5px !important;
    }
</style>
